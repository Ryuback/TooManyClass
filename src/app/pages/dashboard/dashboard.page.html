<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-header translucent class="ion-no-border">
    <ion-toolbar>
      <ion-grid>
        <ion-row class="header">
          <ion-col size="2">
            <ion-avatar>
              <img [src]="user?.imageUrl" class="user" *ngIf="user?.imageUrl">
            </ion-avatar>
          </ion-col>
          <ion-col size="10">
            <ion-card-title class="ion-text-center main-title">TooManyClass</ion-card-title>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-toolbar>
  </ion-header>

  <div class="bubble6 ion-text-center" *ngIf="bubble">

    <ion-card-header>
      <ion-card-title>Bem-vindo ao TooManyClass!
        <ion-icon name="close-circle-outline" class="ion-float-right"
                  style="position: relative;top: -20px;right: -15px;"
                  (click)="this.bubble = false"></ion-icon>
      </ion-card-title>
    </ion-card-header>

    <ion-card-content style="font-size: 1rem;">
      Ei {{user?.givenName}}, vamos começar? Podemos começar com
      <p (click)="addNewClassModal()">Criar uma nova turma.</p>
    </ion-card-content>
    <div class="bubble6-arrow"></div>
  </div>

  <h4 style="margin-top: 1rem; margin-left: 10px">Classes</h4>

  <div class="ion-padding custom-skeleton" *ngIf="!classes">
    <ion-skeleton-text animated style="height: 100px"></ion-skeleton-text>
  </div>

  <ion-card *ngFor="let class of classes" (click)="setActiveClass(class)">
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col size="3">
            <img *ngIf="class.ownerId === user?._id" src="../../assets/icon/graduation-hat.png" alt="">
            <img *ngIf="class.ownerId !== user?._id" src="../../assets/icon/graduated.png" alt="">
          </ion-col>
          <ion-col size="9">
            <ion-title>{{class.name}}</ion-title>
            <ion-label style="margin-top: 10px">{{class.description}}</ion-label>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>

  <div class="add-link" (click)="presentActionSheet()">
    <ion-icon name="add-outline"></ion-icon>
    Adicionar nova classe
  </div>

  <ion-fab horizontal="end" vertical="bottom" slot="fixed" style="margin: 10px">
    <ion-fab-button color="dark">
      <ion-icon md="caret-up" ios="chevron-up-circle-outline"></ion-icon>
    </ion-fab-button>
    <ion-fab-list side="top">
      <ion-fab-button color="light" (click)="logOut()">
        <ion-icon name="log-out-outline"></ion-icon>
      </ion-fab-button>
      <ion-fab-button color="light" (click)="me()">
        <ion-icon name="person-outline"></ion-icon>
      </ion-fab-button>
      <ion-fab-button color="light">
        <ion-icon name="settings-outline"></ion-icon>
      </ion-fab-button>
      <ion-fab-button color="light" (click)="addNewClassModal()">
        <ion-icon name="add-outline"></ion-icon>
      </ion-fab-button>
    </ion-fab-list>
  </ion-fab>
</ion-content>
